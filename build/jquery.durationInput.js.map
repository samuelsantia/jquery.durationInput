{"version":3,"file":"jquery.durationInput.js","sources":["../src/utils/helpers.js","../src/renderer.js","../src/utils/converters.js","../src/handlers.js","../src/index.js"],"sourcesContent":["import $ from 'jquery';\r\n\r\nexport function inputVal($input) {\r\n  return parseInt($input.val() || 0);\r\n};\r\n\r\nexport function capitalize(str) {\r\n  return str.charAt(0).toUpperCase() + str.slice(1);\r\n};\r\n\r\nexport function optsFromAttrs($input, extract = ['min', 'max', 'step', 'format']) {\r\n  const map = {};\r\n  extract.forEach(_mapAttr);\r\n\r\n  return map;\r\n\r\n  function _mapAttr(attr) {\r\n    const isNumber = /^\\d+$/;\r\n    const value = $input.attr(attr);\r\n\r\n    return map[attr] = isNumber.test(value) ? parseInt(value) : value;\r\n  };\r\n};\r\n","import $ from 'jquery';\r\nimport { inputVal } from './utils/helpers';\r\n\r\nexport default (function (){\r\n  class R {\r\n    constructor(container) {\r\n      this.container = container;\r\n    }\r\n\r\n    render() {\r\n      const { el, opts: {\r\n        tpls,\r\n        classes: { wrapper:wrapperClass }\r\n      } } = this.container;\r\n\r\n      this.wrapper = $(tpls.wrapper(wrapperClass));\r\n\r\n      this.inputs = $(_renderInputs.call(this)).map(toArray);\r\n      this.wrapper.insertAfter(el).append(el);\r\n\r\n      function toArray() { return this.toArray(); }\r\n    }\r\n\r\n    getValues() {\r\n      const values = {};\r\n      this.inputs.each(_setInputValue);\r\n\r\n      return values;\r\n\r\n      function _setInputValue() {\r\n        const $input = $(this);\r\n        values[$input.data('unit')] = inputVal($input);\r\n      };\r\n    }\r\n\r\n    update(values) {\r\n      $.each(values, this.updateUnit.bind(this));\r\n    }\r\n\r\n    updateUnit(unit, value) {\r\n      const $input = this[unit];\r\n      if ( $input ) {\r\n        value = value === 0 && $input.val() === '' ? '' : value;\r\n        this[unit].val(value);\r\n      }\r\n    }\r\n\r\n    destroy() {\r\n      const { el } = this.container;\r\n\r\n      el.insertBefore(this.wrapper);\r\n      this.wrapper.remove();\r\n    }\r\n  }\r\n\r\n  function _renderInputs() {\r\n    const { format } = this.container.opts;\r\n\r\n    return $.map(format.split('/'), _createInput.bind(this));\r\n  };\r\n\r\n  function _createInput(input, i) {\r\n\r\n    switch (input) {\r\n      case 'd': case 'dd':\r\n        return this.days  = _renderInput.call(this, 'days');\r\n      case 'h': case 'hh':\r\n        return this.hours = _renderInput.call(this, 'hours');\r\n      case 'm': case 'mm':\r\n        return this.minutes = _renderInput.call(this, 'minutes');\r\n      case 's': case 'ss':\r\n        return this.seconds = _renderInput.call(this, 'seconds');\r\n      default:\r\n        throw new SyntaxError(`${input} format is not defined in time formats`);\r\n    }\r\n  };\r\n\r\n  function _renderInput(inputUnit) {\r\n    const { id:containerId, opts, wrapper } = this.container;\r\n    const { classes: { inputGroup:groupClass }, labels, tpls } = opts;\r\n\r\n    const id = `${inputUnit}-${containerId}`;\r\n    const label = labels[inputUnit];\r\n    const $group = $(tpls.group(id, groupClass, label));\r\n    const $input = $('<input>')\r\n      .attr({ 'id': id, type: 'text' })\r\n      .data('unit', inputUnit);\r\n\r\n    $group.append($input).appendTo(this.wrapper);\r\n\r\n    return $input;\r\n  };\r\n\r\n  return R;\r\n})();\r\n","import { capitalize } from './helpers';\r\n\r\nexport default (function () {\r\n\r\n  const UNITS = ['days', 'hours', 'minutes', 'seconds'];\r\n  const CONVERTERS = {\r\n    days: 24,\r\n    hours: 60,\r\n    minutes: 60,\r\n    seconds: 60\r\n  };\r\n\r\n  function _format2Unit(format) {\r\n    switch (format) {\r\n      case 'd': case 'dd': return 'days';\r\n      case 'h': case 'hh': return 'hours';\r\n      case 'm': case 'mm': return 'minutes';\r\n      case 's': case 'ss': return 'seconds';\r\n      default:\r\n        throw new SyntaxError(`${input} format is not defined in time formats`);\r\n    }\r\n  };\r\n\r\n  function splitTime(time, from, format) {\r\n    const outputs = format.split('/').map(_format2Unit);\r\n    const times = {};\r\n    const minOutput = outputs[outputs.length - 1];\r\n    const maxOutputIndex = outputs.indexOf(outputs[0]);\r\n    const minOutputIndex = outputs.indexOf(minOutput);\r\n\r\n    time = _convertTime(time, from, minOutput);\r\n\r\n    for ( let i = minOutputIndex; i >= maxOutputIndex; i-- ) {\r\n      const output = outputs[i];\r\n      const prev   = outputs[i - 1];\r\n\r\n      if ( prev ) {\r\n        times[output] = Math.round(time % CONVERTERS[prev]);\r\n        time = Math.floor(_convertTime(time, output, prev));\r\n      } else {\r\n        times[output] = Math.floor(time);\r\n      }\r\n    }\r\n\r\n    return times;\r\n  };\r\n\r\n  function toDays(time, from) {\r\n    return _convertTime(time, from, 'days');\r\n  };\r\n\r\n  function toHours(time, from) {\r\n    return _convertTime(time, from, 'hours');\r\n  };\r\n\r\n  function toMinutes(time, from) {\r\n    return _convertTime(time, from, 'minutes');\r\n  };\r\n\r\n  function toSeconds(time, from) {\r\n    return _convertTime(time, from, 'seconds');\r\n  };\r\n\r\n  function _convertTime(time, from, to) {\r\n    const fromUnitIndex = UNITS.indexOf(from);\r\n    const toUnitIndex   = UNITS.indexOf(to);\r\n\r\n    if ( typeof time === 'object' ){\r\n      if ( Object.keys(time).length > 1 ) {\r\n        return Object.keys(time).reduce(sumTimes);\r\n      } else {\r\n        const key = Object.keys(time)[0];\r\n        return _convertTime(time[key], key, to);\r\n      }\r\n    }\r\n\r\n    if ( fromUnitIndex < 0 )\r\n      throw new SyntaxError(`${from} is not defined in time units`);\r\n    if ( toUnitIndex < 0 )\r\n      throw new SyntaxError(`${to} is not defined in time units`);\r\n\r\n    if ( toUnitIndex === fromUnitIndex ) return time;\r\n    if ( time === 0 ) return 0;\r\n\r\n    const operator = toUnitIndex > fromUnitIndex ? '*' : '/';\r\n    const converters = UNITS.filter(units4Conversion);\r\n\r\n    const cr = converters.length === 1\r\n      ? CONVERTERS[converters[0]]\r\n      : converters.reduce(units2ConversionRate);\r\n\r\n    return operator === '*'\r\n      ? time * cr\r\n      : time / cr;\r\n\r\n    function sumTimes(current, next) {\r\n      const value = typeof current === 'string'\r\n        ? _convertTime(time[current], current, to)\r\n        : current;\r\n      const nextValue = _convertTime(time[next], next, to);\r\n\r\n      return value + nextValue;\r\n    };\r\n\r\n    function units4Conversion(unit){\r\n      const currentIndex = UNITS.indexOf(unit);\r\n\r\n      return operator === '*'\r\n        ? currentIndex < toUnitIndex && currentIndex >= fromUnitIndex\r\n        : currentIndex >= toUnitIndex && currentIndex < fromUnitIndex;\r\n    };\r\n    function units2ConversionRate(current, next) {\r\n      const value = typeof current === 'string' ? CONVERTERS[current] : current;\r\n\r\n      return value * CONVERTERS[next];\r\n    };\r\n  };\r\n\r\n  return {\r\n    toDays: toDays,\r\n    toHours: toHours,\r\n    toMinutes: toMinutes,\r\n    toSeconds: toSeconds,\r\n    splitTime: splitTime\r\n  };\r\n})();\r\n","import $ from 'jquery';\r\nimport converters from './utils/converters';\r\nimport { inputVal, capitalize } from './utils/helpers';\r\n\r\nexport default (function () {\r\n\r\n  const UP_ARROW = 38;\r\n  const DOWN_ARROW = 40;\r\n  const letterRegex = /[a-zA-Z]/;\r\n\r\n  function _keyDownHandle({ which:charCode, target, ctrlKey, metaKey, stopImmediatePropagation }) {\r\n    const char = String.fromCharCode(charCode);\r\n    const isCtrl = ctrlKey ||Â metaKey;\r\n    const $input = $(target);\r\n    let value  = inputVal($input);\r\n\r\n    if ( !isCtrl && letterRegex.test(char) ) return false;\r\n\r\n    if ( charCode === UP_ARROW ) {\r\n      value += _getInputStep.call(this, $input);\r\n      $input.val(value).trigger('input');\r\n      return false;\r\n    }\r\n\r\n    if ( charCode === DOWN_ARROW ) {\r\n      value -= _getInputStep.call(this, $input);\r\n      $input.val(value).trigger('input');\r\n      return false;\r\n    }\r\n  };\r\n\r\n  let timeoutValue;\r\n  function _inputHandle({ target }) {\r\n    const { unit } = this.opts;\r\n    const values   = this.renderer.getValues();\r\n    const value = converters[`to${capitalize(unit)}`](values);\r\n\r\n    this.val(value);\r\n  };\r\n\r\n  function _blurHandle({ target }) {\r\n    const $input = $(target);\r\n    const step = _getInputStep.call(this, $input);\r\n    const value = inputVal($input);\r\n\r\n    if ( value % step > 0 ) {\r\n      $input.val(value + (step - (value % step)));\r\n\r\n      const { unit } = this.opts;\r\n      const values   = this.renderer.getValues();\r\n      this.val(converters[`to${capitalize(unit)}`](values));\r\n    }\r\n\r\n    this.forceMin();\r\n  };\r\n\r\n  function _getInputStep($input) {\r\n    const { unit, step } = this.opts;\r\n\r\n    return unit === $input.data('unit') ? step : 1;\r\n  };\r\n\r\n  return {\r\n    keyDownHandle: _keyDownHandle,\r\n    inputHandle: _inputHandle,\r\n    blurHandle: _blurHandle\r\n  };\r\n})();\r\n","import $ from 'jquery';\r\nimport Renderer from './renderer';\r\nimport handlers from './handlers';\r\nimport converters from './utils/converters';\r\nimport { inputVal, optsFromAttrs } from './utils/helpers';\r\n\r\nconst defaults = {\r\n  unit: 'minutes',\r\n  step: 1,\r\n  min:  0,\r\n  format: 'd/h/m',\r\n  labels: {\r\n    days: 'Days',\r\n    hours: 'Hours',\r\n    minutes: 'Minutes',\r\n    seconds: 'Seconds'\r\n  },\r\n  classes: {\r\n    wrapper: 'duration-input',\r\n    inputGroup: 'duration-input-group'\r\n  },\r\n  tpls: {\r\n    wrapper(wrapperClass) {\r\n      return `<div class=\"${wrapperClass}\" />`;\r\n    },\r\n    group(id, groupClass, labelText) {\r\n      return `\r\n        <div class=\"${groupClass}\">\r\n          <label for=\"${id}\">${labelText}</label>\r\n        </div>\r\n      `;\r\n    }\r\n  }\r\n};\r\n\r\nclass DurationInput {\r\n  constructor($el, opts) {\r\n    this.el = $el.attr('type', 'hidden');\r\n    this.id = this.el.attr('id') || this.el.attr('name');\r\n    this.opts  = $.extend({}, defaults, optsFromAttrs(this.el), opts);\r\n    this.renderer = new Renderer(this);\r\n\r\n    this.renderer.render();\r\n    this.val(inputVal(this.el));\r\n    this.bindEvents();\r\n  }\r\n  destroy() {\r\n    this.unbindEvents();\r\n    this.renderer.destroy();\r\n  }\r\n  bindEvents() {\r\n    this.renderer.inputs\r\n      .on('keydown', handlers.keyDownHandle.bind(this))\r\n      .on('input', handlers.inputHandle.bind(this))\r\n      .on('blur',  handlers.blurHandle.bind(this));\r\n  }\r\n\r\n  unbindEvents() {\r\n    this.renderer.inputs\r\n      .off('keydown', handlers.keyDownHandle.bind(this))\r\n      .off('input', handlers.inputHandle.bind(this))\r\n      .off('blur',  handlers.blurHandle.bind(this));\r\n  }\r\n  val(value) {\r\n    if ( typeof value === 'undefined' || value === null ) return this.el.val();\r\n\r\n    const { min, max, unit, format } = this.opts;\r\n    if ( value > max ) value = max;\r\n    if ( value < 0 ) value = 0;\r\n\r\n    const prevValue = inputVal(this.el);\r\n    const splitted = converters.splitTime(value, unit, format);\r\n\r\n    this.renderer.update(splitted);\r\n    this.el.val(value);\r\n\r\n    if ( prevValue !== value ) this.el.trigger('change');\r\n  }\r\n\r\n  forceMin() {\r\n    const { min } = this.opts;\r\n    if ( this.val() < min) this.val(min);\r\n  }\r\n}\r\n\r\n$.fn.durationInput = function (options) {\r\n  return this.each(function (i, el) {\r\n    const $el = $(el);\r\n    const instance = $el.data('duration-input');\r\n\r\n    if ( !instance || !instance instanceof DurationInput ) {\r\n      $el.data('duration-input', new DurationInput($el, options));\r\n    }\r\n\r\n    return $el;\r\n  });\r\n};\r\n"],"names":[],"mappings":"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"}