{"version":3,"file":"jquery.durationInput.js","sources":["../src/utils/helpers.js","../src/renderer.js","../src/utils/converters.js","../src/handlers.js","../src/index.js"],"sourcesContent":["import $ from 'jquery';\n\nexport function inputVal($input) {\n  return parseInt($input.val() || 0);\n};\n\nexport function capitalize(str) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n};\n\nexport function optsFromAttrs($input, extract = ['min', 'max', 'step', 'format']) {\n  const map = {};\n  extract.forEach(_mapAttr);\n\n  return map;\n\n  function _mapAttr(attr) {\n    const isNumber = /^\\d+$/;\n    const value = $input.attr(attr);\n\n    return map[attr] = isNumber.test(value) ? parseInt(value) : value;\n  };\n};\n","import $ from 'jquery';\nimport { inputVal } from './utils/helpers';\n\nexport default (function (){\n  class R {\n    constructor(container) {\n      this.container = container;\n    }\n\n    render() {\n      const { el, opts: {\n        tpls,\n        classes: { wrapper:wrapperClass }\n      } } = this.container;\n\n      this.wrapper = $(tpls.wrapper(wrapperClass));\n\n      this.inputs = $(_renderInputs.call(this)).map(toArray);\n      this.wrapper.insertAfter(el).append(el);\n\n      function toArray() { return this.toArray(); }\n    }\n\n    getValues() {\n      const values = {};\n      this.inputs.each(_setInputValue);\n\n      return values;\n\n      function _setInputValue() {\n        const $input = $(this);\n        values[$input.data('unit')] = inputVal($input);\n      };\n    }\n\n    update(values) {\n      $.each(values, this.updateUnit.bind(this));\n    }\n\n    updateUnit(unit, value) {\n      const $input = this[unit];\n      if ( $input ) {\n        const zeroPrefixed = $input.data('zero-prefixed');\n        if ( zeroPrefixed && value < 10 ) value = '0' + value;\n        this[unit].val(value);\n      }\n    }\n\n    destroy() {\n      const { el } = this.container;\n\n      el.insertBefore(this.wrapper);\n      this.wrapper.remove();\n    }\n  }\n\n  function _renderInputs() {\n    const { format } = this.container.opts;\n\n    return $.map(format.split('/'), _createInput.bind(this));\n  };\n\n  function _createInput(input, i) {\n\n    switch (input) {\n      case 'd': case 'dd':\n        return this.days  = _renderInput.call(this, 'days', input);\n      case 'h': case 'hh':\n        return this.hours = _renderInput.call(this, 'hours', input);\n      case 'm': case 'mm':\n        return this.minutes = _renderInput.call(this, 'minutes', input);\n      case 's': case 'ss':\n        return this.seconds = _renderInput.call(this, 'seconds', input);\n      default:\n        throw new SyntaxError(`${input} format is not defined in time formats`);\n    }\n  };\n\n  function _renderInput(inputUnit, format) {\n    const { id:containerId, opts, wrapper } = this.container;\n    const { classes: { inputGroup:groupClass }, labels, tpls } = opts;\n\n    const id = `${inputUnit}-${containerId}`;\n    const label = labels[inputUnit];\n    const $group = $(tpls.group(id, groupClass, label));\n    const $input = $('<input>')\n      .attr({ 'id': id, type: 'text' })\n      .data({ 'unit': inputUnit, 'zero-prefixed': format.length > 1 });\n\n    $group.append($input).appendTo(this.wrapper);\n\n    return $input;\n  };\n\n  return R;\n})();\n","import { capitalize } from './helpers';\n\nexport default (function () {\n\n  const UNITS = ['days', 'hours', 'minutes', 'seconds'];\n  const CONVERTERS = {\n    days: 24,\n    hours: 60,\n    minutes: 60,\n    seconds: 60\n  };\n\n  function _format2Unit(format) {\n    switch (format) {\n      case 'd': case 'dd': return 'days';\n      case 'h': case 'hh': return 'hours';\n      case 'm': case 'mm': return 'minutes';\n      case 's': case 'ss': return 'seconds';\n      default:\n        throw new SyntaxError(`${input} format is not defined in time formats`);\n    }\n  };\n\n  function splitTime(time, from, format) {\n    const outputs = format.split('/').map(_format2Unit);\n    const times = {};\n    const minOutput = outputs[outputs.length - 1];\n    const maxOutputIndex = outputs.indexOf(outputs[0]);\n    const minOutputIndex = outputs.indexOf(minOutput);\n\n    time = _convertTime(time, from, minOutput);\n\n    for ( let i = minOutputIndex; i >= maxOutputIndex; i-- ) {\n      const output = outputs[i];\n      const prev   = outputs[i - 1];\n\n      if ( prev ) {\n        times[output] = Math.round(time % CONVERTERS[prev]);\n        time = Math.floor(_convertTime(time, output, prev));\n      } else {\n        times[output] = Math.floor(time);\n      }\n    }\n\n    return times;\n  };\n\n  function toDays(time, from) {\n    return _convertTime(time, from, 'days');\n  };\n\n  function toHours(time, from) {\n    return _convertTime(time, from, 'hours');\n  };\n\n  function toMinutes(time, from) {\n    return _convertTime(time, from, 'minutes');\n  };\n\n  function toSeconds(time, from) {\n    return _convertTime(time, from, 'seconds');\n  };\n\n  function _convertTime(time, from, to) {\n    const fromUnitIndex = UNITS.indexOf(from);\n    const toUnitIndex   = UNITS.indexOf(to);\n\n    if ( typeof time === 'object' ){\n      if ( Object.keys(time).length > 1 ) {\n        return Object.keys(time).reduce(sumTimes);\n      } else {\n        const key = Object.keys(time)[0];\n        return _convertTime(time[key], key, to);\n      }\n    }\n\n    if ( fromUnitIndex < 0 )\n      throw new SyntaxError(`${from} is not defined in time units`);\n    if ( toUnitIndex < 0 )\n      throw new SyntaxError(`${to} is not defined in time units`);\n\n    if ( toUnitIndex === fromUnitIndex ) return time;\n    if ( time === 0 ) return 0;\n\n    const operator = toUnitIndex > fromUnitIndex ? '*' : '/';\n    const converters = UNITS.filter(units4Conversion);\n\n    const cr = converters.length === 1\n      ? CONVERTERS[converters[0]]\n      : converters.reduce(units2ConversionRate);\n\n    return operator === '*'\n      ? time * cr\n      : time / cr;\n\n    function sumTimes(current, next) {\n      const value = typeof current === 'string'\n        ? _convertTime(time[current], current, to)\n        : current;\n      const nextValue = _convertTime(time[next], next, to);\n\n      return value + nextValue;\n    };\n\n    function units4Conversion(unit){\n      const currentIndex = UNITS.indexOf(unit);\n\n      return operator === '*'\n        ? currentIndex < toUnitIndex && currentIndex >= fromUnitIndex\n        : currentIndex >= toUnitIndex && currentIndex < fromUnitIndex;\n    };\n    function units2ConversionRate(current, next) {\n      const value = typeof current === 'string' ? CONVERTERS[current] : current;\n\n      return value * CONVERTERS[next];\n    };\n  };\n\n  return {\n    toDays: toDays,\n    toHours: toHours,\n    toMinutes: toMinutes,\n    toSeconds: toSeconds,\n    splitTime: splitTime\n  };\n})();\n","import $ from 'jquery';\nimport converters from './utils/converters';\nimport { inputVal, capitalize } from './utils/helpers';\n\nexport default (function () {\n\n  const UP_ARROW = 38;\n  const DOWN_ARROW = 40;\n  const letterRegex = /[a-zA-Z]/;\n\n  function _keyDownHandle({ which:charCode, target, ctrlKey, metaKey, stopImmediatePropagation }) {\n    const char = String.fromCharCode(charCode);\n    const isCtrl = ctrlKey ||Â metaKey;\n    const $input = $(target);\n    let value  = inputVal($input);\n\n    if ( !isCtrl && letterRegex.test(char) ) return false;\n\n    if ( charCode === UP_ARROW ) {\n      value += _getInputStep.call(this, $input);\n      $input.val(value).trigger('input');\n      return false;\n    }\n\n    if ( charCode === DOWN_ARROW ) {\n      value -= _getInputStep.call(this, $input);\n      $input.val(value).trigger('input');\n      return false;\n    }\n  };\n\n  let timeoutValue;\n  function _inputHandle({ target }) {\n    const { unit } = this.opts;\n    const values   = this.renderer.getValues();\n    const value = converters[`to${capitalize(unit)}`](values);\n\n    this.val(value);\n  };\n\n  function _blurHandle({ target }) {\n    const $input = $(target);\n    const step = _getInputStep.call(this, $input);\n    const value = inputVal($input);\n\n    if ( value % step > 0 ) {\n      $input.val(value + (step - (value % step)));\n\n      const { unit } = this.opts;\n      const values   = this.renderer.getValues();\n      this.val(converters[`to${capitalize(unit)}`](values));\n    }\n\n    this.forceMin();\n  };\n\n  function _getInputStep($input) {\n    const { unit, step } = this.opts;\n\n    return unit === $input.data('unit') ? step : 1;\n  };\n\n  return {\n    keyDownHandle: _keyDownHandle,\n    inputHandle: _inputHandle,\n    blurHandle: _blurHandle\n  };\n})();\n","import $ from 'jquery';\nimport Renderer from './renderer';\nimport handlers from './handlers';\nimport converters from './utils/converters';\nimport { inputVal, optsFromAttrs } from './utils/helpers';\n\nconst defaults = {\n  unit: 'minutes',\n  step: 1,\n  min:  0,\n  format: 'd/h/m',\n  labels: {\n    days: 'Days',\n    hours: 'Hours',\n    minutes: 'Minutes',\n    seconds: 'Seconds'\n  },\n  classes: {\n    wrapper: 'duration-input',\n    inputGroup: 'duration-input-group'\n  },\n  tpls: {\n    wrapper(wrapperClass) {\n      return `<div class=\"${wrapperClass}\" />`;\n    },\n    group(id, groupClass, labelText) {\n      return `\n        <div class=\"${groupClass}\">\n          <label for=\"${id}\">${labelText}</label>\n        </div>\n      `;\n    }\n  }\n};\n\nclass DurationInput {\n  constructor($el, opts) {\n    this.el = $el.attr('type', 'hidden');\n    this.id = this.el.attr('id') || this.el.attr('name');\n    this.opts  = $.extend({}, defaults, optsFromAttrs(this.el), opts);\n    this.renderer = new Renderer(this);\n\n    let initialValue = inputVal(this.el);\n    if ( initialValue < this.opts.min ) initialValue = this.opts.min;\n\n    this.renderer.render();\n    this.val(initialValue);\n    this.bindEvents();\n  }\n  destroy() {\n    this.unbindEvents();\n    this.renderer.destroy();\n  }\n  bindEvents() {\n    this.renderer.inputs\n      .on('keydown', handlers.keyDownHandle.bind(this))\n      .on('input', handlers.inputHandle.bind(this))\n      .on('blur',  handlers.blurHandle.bind(this));\n  }\n\n  unbindEvents() {\n    this.renderer.inputs\n      .off('keydown', handlers.keyDownHandle.bind(this))\n      .off('input', handlers.inputHandle.bind(this))\n      .off('blur',  handlers.blurHandle.bind(this));\n  }\n  val(value) {\n    if ( typeof value === 'undefined' || value === null ) return this.el.val();\n\n    const { min, max, unit, format } = this.opts;\n    if ( value > max ) value = max;\n    if ( value < 0 ) value = 0;\n\n    const prevValue = inputVal(this.el);\n    const splitted = converters.splitTime(value, unit, format);\n\n    this.renderer.update(splitted);\n    this.el.val(value);\n\n    if ( prevValue !== value ) this.el.trigger('change');\n  }\n\n  forceMin() {\n    const { min } = this.opts;\n    if ( this.val() < min) this.val(min);\n  }\n}\n\n$.fn.durationInput = function (options) {\n  return this.each(function (i, el) {\n    const $el = $(el);\n    const instance = $el.data('duration-input');\n\n    if ( !instance || !instance instanceof DurationInput ) {\n      $el.data('duration-input', new DurationInput($el, options));\n    }\n\n    return $el;\n  });\n};\n\n$.fn.durationInput.defaults = defaults;\n"],"names":[],"mappings":"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"}